# deno install -qA -n vr https://deno.land/x/velociraptor@1.0.0-beta.16/cli.ts
# allow:
#   - net
#   - env
#   - read
#   - write

scripts:
  build: |
    lume --version || deno install --unstable -A https://deno.land/x/lume/cli.js
    lume web
  start: deno run -A --unstable app.ts
  once: deno run -A --unstable app.ts --once
  format: deno fmt *.ts
  json: deno run --allow-read --allow-net test/json.server.ts
  server:
    cmd: deno run -A test/oak.server.ts
    unstable: true
    # watch: true
    env:
      DEBUG: true
  test:
    desc: server watch mode
    cmd: |
      deno run -A test/oak.server.ts &
      sleep 5
      denon -v || deno install -qAf --unstable https://deno.land/x/denon@2.4.4/denon.ts
      denon run -A --unstable app.ts --once
    env:
      DEBUG: true
      # DEBUG_EMAIL: true
    # watch: true
    unstable: true
  dev:
    desc: watch mode
    cmd: denon run -A --unstable app.ts --once
    env:
      # DEBUG_EMAIL: true
      DEBUG: true
    # watch: true
    # unstable: true
