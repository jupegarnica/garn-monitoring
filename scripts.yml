# deno install -qA -n vr https://deno.land/x/velociraptor@1.0.0-beta.16/cli.ts
allow:
  - net
  - env
  - read
  - write

scripts:
  start: deno run --unstable monitoring-continuous.ts
  once: deno run --unstable monitoring-once.ts
  format: deno fmt *.ts
  server:
    cmd: deno run -A test/testing.server.ts
    unstable: true
    # watch: true
    env:
      DEBUG: true
  test:
    desc: server watch mode
    cmd: |
      deno run -A test/testing.server.ts &
      sleep 5
      denon -v || deno install -qAf --unstable https://deno.land/x/denon@2.4.4/denon.ts
      denon run -A --unstable monitoring-once.ts
    env:
      DEBUG: true
      # DEBUG_EMAIL: true
    # watch: true
    unstable: true
  dev:
    desc: watch mode
    cmd: monitoring-once.ts
    env:
      # DEBUG_EMAIL: true
      DEBUG: true
    watch: true
    unstable: true
